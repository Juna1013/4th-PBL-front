---
title: "デジタルツイン機能解説"
date: "2024-12-25"
description: "ライントレースカーの制御と分析に必要な機能を詳しく解説します"
---

## システム機能概要

本システムは、ライントレースカーの制御と分析に必要な全ての情報をリアルタイムで提供します。主な機能は以下の通りです。

### 1. 8チャンネル・センサーアレイの可視化

8つの赤外線センサーの状態をリアルタイムで追跡し、ダッシュボード上に視覚的に表示します。

- **各チャンネルの個別状態表示**: どのセンサーが黒線を検知しているかを直感的に把握できます。
- **検出ライン数のカウント**: 同時に検知しているセンサーの数を確認できます。
- **バイナリパターンの解析**: センサー状態を `01011000` のようなバイナリデータとして記録・表示します。

### 2. デジタルツインモニター (2D可視化)

物理的なマシンの挙動を画面上で再現するデジタルツインモニターを搭載しています。

- **ヘディングアップ視点**: 常に進行方向を上にしたマップ表示で、ドライバー視点のような臨場感を提供します。
- **リアルタイム位置推定**: センサーの入力値からラインに対する車体の相対位置（偏差）を計算し、画面上の車体を動かします。
- **コース周回アニメーション**: 角丸正方形のコースをマシンが周回する様子をアニメーションで表現します。

### 3. Next.js ネイティブ統合

従来のPythonバックエンドサーバー（FastAPI）を廃止し、Next.js API Routesに完全に移行しました。

- **サーバーレスアーキテクチャ**: Vercel等のEdge環境でも動作するように設計されています。
- **シングルトン状態管理**: インメモリでデータを高速に処理・キャッシュします。
- **WebSocket不要**: HTTPポーリングによる効率的なデータ同期を実現しています。

### 4. 強化学習用データセット

収集したテレメトリデータは、強化学習（Reinforcement Learning）の学習データとして即座に利用可能です。

- **JSON形式出力**: タイムスタンプとセンサー状態を含むクリーンなJSONデータを取得できます。
- **ワンクリックコピー**: ダッシュボードから直接クリップボードにデータをコピーできます。
